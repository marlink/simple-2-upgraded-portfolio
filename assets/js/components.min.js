const $q=window.safeQuery,$qa=window.safeQueryAll;document.addEventListener("DOMContentLoaded",()=>{try{const e=$qa(".tabs");e&&0!==e.length&&e.forEach(e=>{if(!e)return;const t=$qa(".tab",e),o=$qa(".tab__panel",e);t&&0!==t.length&&o&&0!==o.length?t.forEach(n=>{n.addEventListener("click",()=>{t.forEach(e=>{e.classList.remove("is-active"),e.setAttribute("aria-selected","false")}),o.forEach(e=>e.classList.remove("is-active")),n.classList.add("is-active"),n.setAttribute("aria-selected","true");const a=n.getAttribute("aria-controls"),r=$q("#"+a,e);r&&r.classList.add("is-active")})}):console.warn("Tabs component missing required elements",e)})}catch(e){console.error("Error initializing tabs component:",e)}try{$qa(".accordion").forEach(e=>{$qa(".accordion__item",e).forEach(e=>{const t=$q(".accordion__button",e),o=$q(".accordion__panel",e);t&&o&&t.addEventListener("click",()=>{const e="true"===t.getAttribute("aria-expanded");t.setAttribute("aria-expanded",String(!e)),o.hidden=e})})})}catch(e){console.error("Error initializing accordion component:",e)}try{const e=$qa("[data-modal-target]");$qa(".modal").forEach(e=>{const t=$q(".modal__overlay",e),o=$q(".modal__dialog",e),n=$qa("[data-modal-close]",e);let a=null;const r=()=>{e.setAttribute("hidden",""),e._keydownHandler&&(document.removeEventListener("keydown",e._keydownHandler),delete e._keydownHandler),a&&a.focus()};t&&t.addEventListener("click",r),n.forEach(e=>e.addEventListener("click",r)),e._openModal=()=>{a=document.activeElement,e.removeAttribute("hidden");const t=$q('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',o);t&&t.focus();const n=e=>{if("Escape"===e.key&&r(),"Tab"===e.key){const t=$qa('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',o);if(0===t.length)return;const n=t[0],a=t[t.length-1];e.shiftKey&&document.activeElement===n?(e.preventDefault(),a.focus()):e.shiftKey||document.activeElement!==a||(e.preventDefault(),n.focus())}};document.addEventListener("keydown",n),e._keydownHandler=n}}),e.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const o=e.getAttribute("data-modal-target"),n=$q(o);n&&n._openModal&&n._openModal()})});$qa("[data-tooltip]").forEach(e=>{const t=document.createElement("span");t.className="tooltip",t.textContent=e.getAttribute("data-tooltip"),e.appendChild(t),t.style.left="50%",t.style.bottom="100%",t.style.transform="translate(-50%, -6px)"});const t=e=>{const t=document.createElement("textarea");return t.innerHTML=e,t.value},o=e=>{if(e.classList.contains("code-example")){const o=e.cloneNode(!0);o.querySelectorAll("br").forEach(e=>{e.replaceWith(document.createTextNode("\n"))});Array.from(o.querySelectorAll("strong")).forEach(e=>{const t=e.parentNode,o=e.nextSibling;for(;e.firstChild;)t.insertBefore(e.firstChild,e);if(o&&(o.nodeType===Node.TEXT_NODE||o.nodeType===Node.ELEMENT_NODE)){(o.textContent?o.textContent.trim():"")&&t.insertBefore(document.createTextNode("\n"),e)}t.removeChild(e)});let n=o.textContent||o.innerText;return n=n.replace(/\n{3,}/g,"\n\n"),t(n).trim()}if(e.classList.contains("code-block")){const t=$q("code",e);return t?t.textContent||t.innerText:e.textContent||e.innerText}return e.textContent||e.innerText},n=window.copyToClipboard,a=e=>{if($q(".code-copy-btn",e))return;const t=document.createElement("button");t.className="code-copy-btn",t.setAttribute("aria-label","Copy code"),t.setAttribute("type","button"),t.textContent="Copy",t.addEventListener("mousedown",e=>e.preventDefault()),t.addEventListener("touchstart",e=>e.preventDefault());const a=async a=>{a.preventDefault(),a.stopPropagation();const r=o(e);if(await n(r)){const e=t.textContent;t.textContent="Copied!",t.classList.add("copied"),setTimeout(()=>{t.textContent=e,t.classList.remove("copied")},2e3)}else{const e=t.textContent;t.textContent="Error",setTimeout(()=>{t.textContent=e},2e3)}};t.addEventListener("click",a),t.addEventListener("touchend",e=>{e.preventDefault(),a(e)}),e.appendChild(t)};$qa(".code-example, pre.code-block").forEach(a)}catch(e){console.error("Error initializing code copy button:",e)}try{const e=$qa("[data-video-cover]");if(e&&e.length>0){const t=window.matchMedia("(pointer: fine)").matches;e.forEach(e=>{const o=$q(".video-cover__video",e);$q(".video-cover__cover",e),$q(".video-cover__play-icon",e);if(!o)return void console.warn("Video cover component missing video element",e);let n=!1,a=null;const r=()=>{n?(o.pause(),n=!1,e.classList.remove("video-cover--playing")):o.play().then(()=>{n=!0,e.classList.add("video-cover--playing"),e.classList.remove("video-cover--show-icon")}).catch(e=>{console.error("Error playing video:",e)})};if(t)e.addEventListener("click",e=>{e.preventDefault(),r()});else{let t=!1;e.addEventListener("click",o=>{o.preventDefault(),t||n?(r(),t=!1):(t=!0,e.classList.add("video-cover--show-icon"),clearTimeout(a),a=setTimeout(()=>{n||e.classList.remove("video-cover--show-icon")},2e3),setTimeout(()=>{t=!1},3e3))})}o.addEventListener("ended",()=>{n=!1,e.classList.remove("video-cover--playing"),e.classList.remove("video-cover--show-icon")}),o.addEventListener("pause",()=>{n&&(n=!1,e.classList.remove("video-cover--playing"))})})}}catch(e){console.error("Error initializing video cover component:",e)}});